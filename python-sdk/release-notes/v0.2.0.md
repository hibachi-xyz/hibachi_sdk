# Hibachi Python SDK v0.2.0 Release Notes

## Overview

Version 0.2.0 represents a major enhancement to the Hibachi Python SDK, focusing on improved reliability, maintainability, and developer experience. This release is **fully backwards compatible** with v0.1.x, ensuring a smooth upgrade path for existing users.

---

## What's New for Users

### Performance Improvements

- **Optimized connection pooling** Improved TCP connection pooling, reducing latency of requests in `HibachiApiClient`
- **Fast JSON serialization**: Integrated `orjson`, a Rust-based JSON library, increasing speed of serialization/deserialization operations approximately 4x.

### Enhanced Error Handling

The SDK now provides a comprehensive exception hierarchy that makes it easier to handle specific error cases in your trading applications:

- **Structured exception types**: Catch and handle specific error types like `HttpConnectionError`, `TransportTimeoutError`, `WebSocketConnectionError`, `ValidationError`, and more
- **Better error messages**: More descriptive error information to help diagnose issues quickly
- **Improved exception propagation**: All exceptions emitted by the SDK will 

### Typing / Logging Improvements

- **Better IDE support**: Improved autocomplete and inline documentation in modern IDEs
- **Enhanced type definitions**: More accurate and complete type hints across all API methods
- **Better debugging**: More informative log messages make troubleshooting easier

### Documentation

- **Comprehensive API documentation**: Auto-generated read-the-docs style documentation covering all public APIs
- **Google-style docstrings**: Consistent, readable documentation for all public methods and classes
- **Usage examples**: Improved inline documentation with usage patterns

### HTTP / WS Executor Architecture

The SDK now uses a pluggable HTTP executor system, providing more flexibility:

- **Multiple network backends supported**: Choose between `httpx` (default) and `requests` for `HibachiApiClient` or `aiohttp` (default) and `websockets` for WS clients.
- **Improved connection handling**: More robust network error handling and timeout management
- **Customizable transport**: Advanced users can implement executors to handle WS or HTTP connections and messaging with custom logic. See `hibachi_xyz/executors/interface.py` for interface definitions.

---

## What's New for Developers

### Code Quality & Static Analysis

#### MyPy Type Checking
- Full MyPy strict mode compliance across the entire codebase
- Comprehensive type annotations for all functions, methods, and classes

#### Ruff Linting
- Modern, fast Python linting with Ruff
- Enforcing consistent code style and best practices
- Includes auto-formatting capabilities

#### Pydoclint Integration
- Automated validation of docstring accuracy
- Ensures docstrings match function signatures
- Prevents documentation drift

### Testing Infrastructure

#### HTTP Unit Tests
- Deterministic unit testing framework for all HTTP REST endpoints
- Mock executors allow testing without hitting live APIs
- JSON-based test fixtures for reproducible tests
- Comprehensive test coverage for:
  - All GET endpoints (market data, account info, capital operations)
  - All POST endpoints (order placement, transfers, withdrawals)
  - All PUT endpoints (order updates)
  - All DELETE endpoints (order cancellations)
  - Exception handling and error cases
  - Validation logic

#### WebSocket Unit Tests
- Complete unit test coverage for WebSocket functionality
- Mock WebSocket connections for deterministic testing
- Tests covering:
  - Market data streams (orderbook, trades, etc.)
  - Account update streams
  - Trade execution streams
  - Connection lifecycle management
  - Error handling and reconnection logic

For more see comprehensive test documentation in `python-sdk/tests/README.md`

### Documentation Generation

#### Sphinx Integration
- Automated HTML documentation generation
- Napoleon extension for Google-style docstrings
- Linked to specific release tags

#### Streamlined Development Workflow
- Poetry task runner (`poe`) integration for common operations:
  - `poetry run poe check` - Run all pre-build CI checks locally and build docs
  - `poetry run poe lint` - Run all auto-fixes (formatting, linting)

---

## Migration Guide

### From v0.1.x to v0.2.0

Upgrading is straightforward:

```bash
pip install --upgrade hibachi_xyz
```

**Suggested (Optional) improvements you should make:**

1. **Update exception handling** to use the new structured exception types:
```python
# Before (still works)
try:
    client.place_order(...)
except Exception as e:
    print(f"Error: {e}")

# After (recommended)
from hibachi_xyz.errors import ValidationError, HttpConnectionError

try:
    client.place_order(...)
except ValidationError as e:
    print(f"Invalid parameters: {e}")
except HttpConnectionError as e:
    print(f"Network error: {e}")
```

2. **Replace deprecated HibachiApiError**, which will be removed in future release
```python
# Before (still works)
try:
    client.place_order(...)
except HibachiApiError as e:
    print(f"Error: {e.status_code} {e.message}")

# After (recommended)
from hibachi_xyz.errors import ServiceUnavailable, BadRequest, BadHttpStatus

try:
    client.place_order(...)
except MaintenanceOutage as e:
    print(f"Exchange down for maintenance: {e}")
except BadRequest as e:
    print(f"Exchange rejected request: {e}")
except BadHttpStatus as e:
    print(f"Exchange returned unsuccessful status: {e.status_code} {e.message}")
```

3. **Configure logging** instead of relying on print output:
```python
import logging

# Setup logging config
logging.basicConfig(level=logging.INFO) # just an example, your standard config setup should work
# Retrieve SDK logger
logger = logging.getLogger('hibachi_xyz')
# Configure SDK logger ...
```
---

## Resources

- **GitHub Repository**: https://github.com/hibachi-xyz/yule-os
- **Documentation**: TODO link
- **Issue Tracker**: https://github.com/hibachi-xyz/yule-os/issues

---

Released: TODO
